## LINUX系统学习笔记(javaEE、大数据、Python开发通用)

#### 一.LINUX学习方向

![](.\IMAGES\1_1.png)



#### 二.LINUX应用方向

1.个人桌面应用(ubuntu)

2.服务器领域(最强)

3.嵌入式领域

#### 三.LINUX学习阶段和方法

##### 1.学习流程：

1.linux环境得基本操作命令

2.linux的各种配置

3.linux下如何搭建对应语言的开发环境

4.能编写shell脚本

看完课程前四个必须达到

5.能进行安全设置，防止攻击，保障服务器正常运行

6.深入理解linux系统（对内核有研究）

##### 2.学习思想

1.高效愉快的学习

2.先建立整体框架

3.只用掌握基本的Linux命令，要学会查询手册和百度

4.先know how ,再know why

5.重实操

6.适当囫囵吞枣

7.Linux不是编程，重点是实际操作，各种常用指令要玩溜



### LINUX基础篇——入门

#### 三.LINUX系统介绍

1.一款操作系统，免费，开源，安全，高效，稳定，处理高并发非常强悍，现在很多企业级都部署到Linux/unix服务器运行

2.Linux创始人：linux:林纳斯，吉祥物：企鹅:tux

3.Linux主要发行版本：Linux与Ubuntu、redhat等的关系：内核与应用

![](.\IMAGES\3_1.png)

4.常见的操作系统：windows,linux,android



#### 四.Linux与Unix的关系

#### 五.windows与linux的关系

![](.\IMAGES\5_1.png)



#### 六.VM与LINUX的安装

##### 1.搭建环境

1.先安装virtual machine,vm12(虚拟机)

2.再安装Linux（CentOS6.8）

3.关系图

![](.\IMAGES\6_2.png)

##### 2.vm12和CentOS系统的安装

![](.\IMAGES\6_3.png)

###### 1.vm12安装步骤

![](.\IMAGES\6_4.png)

进入BIOS设置虚拟化

安装vm12步骤

![](.\IMAGES\6_5.png)



###### 2.CentOS的安装

1.创建虚拟机(空间)

1.主页->创建新的虚拟机

![](.\IMAGES\7_1.png)

![](.\IMAGES\7_2.png)

![](.\IMAGES\7_3.png)

![](.\IMAGES\7_4.png)

![](.\IMAGES\7_5.png)

![](.\IMAGES\7_6.png)

![](.\IMAGES\7_7.png)

![](.\IMAGES\7_8.png)

![](.\IMAGES\7_9.png)

![](.\IMAGES\7_10.png)



难点：

1.虚拟机的网络连接三种形式说明：

​	桥接模式：同一个网络环境下，各个主机可以任意访问其他主机即其所有的虚拟机。好处：Linux可以和其他系统通信。弊端：容易出现IP地址冲突

![](.\IMAGES\7_11.png)

​	NAT模式：母机双IP，母机不能与其他母机所有的Linux虚拟机通信，但母机所有的Linux虚拟机可以和其他母机通信，网络地址转换方式：Linux可以访问外网，不会造成IP冲突

![](.\IMAGES\7_12.png)

​	主机模式：你的Linux 是一个独立的主机，不能访问外网



2.开始安装系统(CentOS6.8)

![](.\IMAGES\7_13.png)

![](.\IMAGES\7_14.png)

![](.\IMAGES\7_15.png)

![](.\IMAGES\7_16.png)

![](.\IMAGES\7_17.png)

![](.\IMAGES\7_18.png)

![](.\IMAGES\7_19.png)

![](.\IMAGES\7_20.png)

![](.\IMAGES\7_21.png)

![](.\IMAGES\7_22.png)

![](.\IMAGES\7_23.png)

![](.\IMAGES\7_24.png)

![](.\IMAGES\7_25.png)

![](.\IMAGES\7_26.png)

![](.\IMAGES\7_27.png)

![](.\IMAGES\7_28.png)

![](.\IMAGES\7_29.png)

然后格式化，修改磁盘

![](.\IMAGES\7_30.png)

![](.\IMAGES\7_31.png)

![](.\IMAGES\7_33.png)

![](.\IMAGES\7_35.png)

![](.\IMAGES\7_34.png)

![](.\IMAGES\7_36.png)

![](.\IMAGES\7_37.png)

![](.\IMAGES\7_38.png)

创建用户暂时先不创建，后面会单独创建，先使用root账户登录



![](.\IMAGES\7_39.png)

![](.\IMAGES\7_40.png)

![](.\IMAGES\7_41.png)

![](.\IMAGES\7_42.png)

![](.\IMAGES\7_43.png)

至此CentOS系统安装完成



安装CentOS时的注意事项：

LINUX密码生产中一定要设置的强度相当高，不然极易被破解，这里学习用：12243672

Linux分区：

必创建的三个分区

1./boot分区：Linux在启动时会生成引导文件，默认放在boot分区内

![](.\IMAGES\7_24.png)



2.swap分区：交换分区，当系统内存不够用时，可用此分区替代内存

![](.\IMAGES\7_27.png)

3.根分区：/

![](.\IMAGES\7_28.png)

![](.\IMAGES\7_29.png)

然后格式化，修改磁盘

#### 七.CentOS的终端使用与联网

##### 1.对终端的使用

![](.\IMAGES\7_44.png)

2.配置联网

![](.\IMAGES\8_1.png)

#### 八.VMtool的使用和安装

vmtools:让我们在windows下更好的管理vm虚拟机

1.可以直接粘贴命令在windows和centos之间

2.可以设置windows和centos的共享文件夹

![](.\IMAGES\8_2.png)

##### vmtools安装：

1.进入centos

2.点击vm菜单的->install vmware tools

3.centos会出现一个vm的安装包

4.点击右键解压，得到一个安装文件

5.进入该vm解压的目录，该文件在/root/桌面/vmware-tools-distrib/下

6.安装./vmware-install.pl

7.全部使用默认设置即可

8.需要reboot重新启动即可生效

解压命令：eg:tar -zxvf VMwareTools-10.0.5-3228253.tar.gz

指令安装

![](.\IMAGES\8_3.png)

然后一路回车就行

![](.\IMAGES\8_4.png)

安装完后进行重启

重启指令：reboot

然后就可以实现windows和centos之间内容的复制粘贴了

##### 共享文件夹：

![](.\IMAGES\8_5.png)

共享文件夹在Linux中的位置

![](.\IMAGES\8_6.png)



#### 九.Linux文件系统目录结构

基本介绍:采用级层式的树状目录结构，在此结构中的最上层是根目录"/",然后在此目录下再创建其他的目录,以文件的形式来管理设备

**“在Linux的世界中，一切皆文件”**

opt：安装软件所用的文件夹

![](.\IMAGES\9_1.png)



![](.\IMAGES\9_2.png)

![](.\IMAGES\9_3.png)

![](.\IMAGES\9_4.png)

![](.\IMAGES\9_5.png)

![](.\IMAGES\9_6.png)

#### 十.远程登录Linux服务器(xshell5)

这里使用xshell6:远程登录服务器

远程上传和下载文件软件:XFtp5

![](.\IMAGES\10_1.png)

使用前提：Linux需要开启sshd服务，该服务监听22号端口，一般情况下开启的。（端口：类似人的耳朵，理论上有65536个端口可以开启）端口开启越多，安全性越弱。

如何确定sshd服务是否开启？

1.setup

![](.\IMAGES\10_2.png)

2.选择系统服务，其中标“*”表示开启服务，查找sshd,看是否标星号。

![](.\IMAGES\10_3.png)

安好xshell6后新建一个会话：

注意点：LinuxIP地址查询：命令：ifconfig

未联网：无法得到IP地址

![](.\IMAGES\10_4.png)

需要联网才会分配IP地址

分配IP地址

![](.\IMAGES\10_5.png)

新建会话过程：

![](.\IMAGES\10_6.png)

![](.\IMAGES\10_7.png)



![](.\IMAGES\10_8.png)

![](.\IMAGES\10_9.png)



建立远程连接完成：

测试：

1.输入reboot即可远程重启系统

2.在Linux建立文件，是否可以被xshell监听到，以验证远程连接有效。

1.cd / home/#切换到home目录下

2.ll#查询该目录下的文件

3.touch hello#新建一个名为hello的文件

![](.\IMAGES\10_11.png)



#### 十一.XFTP7的安装与使用

XFTP7:远程上传和下载文件

##### 使用

1.新建会话

![](.\IMAGES\11_1.png)



连接成功

![](.\IMAGES\11_2.png)

文件的传输与下载：

![](.\IMAGES\11_3.png)



#### 十二.Vi和Vim编辑器的使用

Linux重要的编辑器

vi:Linux内建的编辑器

Vim:vi的增强版，可以主动的以字体颜色辨别语法的正确性

vi和vim常见的三种模型：

1.正常模式：默认模式，使用可以使用【上下左右】来移动光标和使用各种快捷键，可以删除字符或删除整行

2.插入模式(编辑模式):按i可进入

3.命令行模式:提供相关指令，完成存盘、读取、替换、读取、离开vim、显示行号等的动作

eg:使用vim开发一个：hello.java程序。

1.rm 123.txt %删除123.txt文件

2.ll:显示当前目录下的文件

3.Vim按i进入编辑模式，按Esc键退出编辑模式进入一般模式，再按：即可进去命令行模式

4.命令行模式下输入：wq表示写入文件并退出，输入“q"表示退出

![](.\IMAGES\12_3.png)

![](.\IMAGES\12_4.png)

![](.\IMAGES\12_5.png)

文件写入成功：

![](.\IMAGES\12_6.png)

![](.\IMAGES\12_7.png)



注：q:退出

​		q!:强制退出

**vi和vim的快捷键：**

![](.\IMAGES\12_8.png)

注意：

1.拷贝粘贴：再一般模式下输入yy即拷贝当前行，还需输入p才能粘贴当前行

2.编辑文件，使用快捷键到文档的最末行(G)和最首行(gg),注意是在正常模式(一般模式)下输入

3.撤销操作在正常模式下进行

4.移动光标操作也是在正常模式下完成

扩展阅读：

Vim快捷键键盘图：

![](.\IMAGES\12_9.png)



#### 十三.关机，重启，用户登录注销

##### 1.关机与重启指令：

**shutdown:**

shutdown -h now:表示立即关机

shutdown -h 1:表示1分钟后关机

shutdown -r now:表示立即重启

**halt:**

halt:效果等价于关机

**reboot:**

reboot:重启

**sync:**

sync:把内存数据同步到磁盘上

注：不管是重启系统还是关闭系统，首先要运行sync命令，把内存中的数据同步到磁盘上去



##### 2.用户的登陆和注销

1.登录是一般少用root账号登录，权限太高，一般方法是：利用普通用户登录，再用"su - 用户名"命令来切换成系统管理员身份

2.在提示符下输入logout即可注销用户

注：1.logout指令图形运行级别无效，在运行级别3下有效

注销用户：

![](.\IMAGES\13_1.png)





#### 十四.用户管理 创建用户指定密码

关系框图：

![](.\IMAGES\14_1.png)

1.Linux是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统程序员申请一个账号

2.Linux的用户至少要属于一个组



##### 1.添加用户

基本语法：

1.useradd [选项(中括号里的代表可选)] 用户名  %该指令若创建用户时没有指定组，则自动创建与用户同名的组，并将该用户放在此组内

也可以通过useradd -d 指定目录 新的用户名，%给新创建的用户指定家目录，注意：指定目录不要先创建，在此命令下创建即可

2.cd %切换当前目录，change

3.passwd 用户名  %指定或-修改用户名密码

eg:

添加一个用户xm

![](.\IMAGES\14_2.png)



![](.\IMAGES\14_8.png)

设置密码

![](.\IMAGES\14_4.png)



其他相关指定：

1.mkdir 目录名#新建目录

![](.\IMAGES\14_3.png)



2.pwd %显示当前所在工作目录的全路径

![](.\IMAGES\14_5.png)





##### 2.删除用户

1.userdel 用户名 %删除用户，注需要使用root用户进行操作

eg:1.删除用户xm,但保留家目录、

userdel xm

![](.\IMAGES\14_9.png)

2.删除用户以及用户主目录

userdel -r xq

![](.\IMAGES\14_10.png)



思考：在删除用户时，我们一般不会将家目录删除掉



##### 3.查询和切换用户

1.id 用户名%查询用户信息

![](.\IMAGES\14_11.png)



2.su- 切换用户名%在操作过程中，若当前用户权限不够，可以通过su -指令，切换到高权限用户，比如：root

注：1.高权限切换到低权限的用户，不需要输入密码，反之需要

2.当需要返回原来用户时，使用exit指令

eg:创建一个用户zf,指定密码，然后切换到zf

![](.\IMAGES\14_12.png)



4.whoami/who am I%查看当前用户

![](.\IMAGES\14_13.png)





#### 十五.组的管理

介绍：类似角色，系统可以对多个有共性的用户进行统一管理



##### 1.增加组

groupadd 组名 %增加组

eg:

![](.\IMAGES\14_14.png)



##### 2.删除组

groupdel 组名 %删除组

eg:

![](.\IMAGES\15_1.png)



##### 3.增加用户时直接加上组

useradd -g 用户组 用户名 %增加用户时直接加上组

eg：增加一个用户zwj,直接将他指定到wudang

![](.\IMAGES\15_2.png)



##### 4.修改用户组

usermod -g 用户组 用户名 %修改用户组

eg:创建一个shaolin组，将zwj用户修改到shaolin组

![](.\IMAGES\15_3.png)



#### 十六.用户和组的相关文件

![](.\IMAGES\16_1.png)



##### 1./etc/passwd 文件

用户(user)的配置文件，记录用户的各种信息

每行的含义：用户名：口令：用户标识号：组标识号：注释性描述

主目录：登录shell

![](.\IMAGES\16_2.png)



##### 2./etc/shadow 文件

口令的配置文件

每行的含义：登录名：加密口令：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：标志



##### 3./etc/group 文件

组(group)配置文件,记录Linux包含的组的信息

每行含义:组名：口令：组标识号：组内用户列表

![](.\IMAGES\16_3.png)



#### 十七.实用指令——运行级别和找回root密码

##### 1.指定运行级别

运行级别说明：

0：关机

1：单用户【找回丢失密码】

2：多用户状态没有网络服务

3：多用户状态有网络服务

4：系统未使用保留给用户

5：图形界面

6：系统重启

常用运行级别是3和5，要修改默认的运行级别可改文件：/etc/inittab 的 id:5:initdefault:这一行的数字

![](.\IMAGES\16_4.png)

当前一般为5运行级别：图形界面

##### 2.切换到指定运行级别的指令

基本语法：

init[012356]%4一般不要动，保留级别

![](.\IMAGES\16_5.png)

eg:

1.通过init来切换不同的运行级别，比如5->3,然后关机

init 3

![](.\IMAGES\16_6.png)



![](.\IMAGES\16_8.png)

init 5 %切回运行级别5

![](.\IMAGES\16_9.png)



init 0 %切到运行级别0，关机

![](.\IMAGES\16_10.png)



2.如何找回丢失的root密码(**前提：不能远程操作，需要直接接触到主机，在服务器上操作才可以**)

思路：进入到  单用户模式，然后修改root密码。因为进入单用户模式，root不需要密码就可以登录

1.在开机时倒计时界面是按一次enter键（注意是1次)

![](.\IMAGES\16_11.png)



2.在键入e键，edit启动命令

![](.\IMAGES\16_12.png)

光标高亮到第2行

![](.\IMAGES\16_13.png)

再输入e

![](.\IMAGES\16_14.png)

再输入 1，按enter进入到单用户模式

![](.\IMAGES\16_15.png)

再输入b,进入boot引导模式

![](.\IMAGES\16_16.png)

即进入到单用户模式，以root账户登录，这样就可以在这里改密码

![](.\IMAGES\16_17.png)



然后进行修改密码，之后reboot重启

![](.\IMAGES\16_18.png)



2.Linux运行后直接进入到运行级别3——命令行模式

1.vim /etc/inittab 修改文件中默认运行级别

![](.\IMAGES\16_19.png)

然后reboot

![](.\IMAGES\16_20.png)





#### 十八.实用指令——帮助指令

介绍：当对某个指令不熟悉时，可以使用Linux提供的帮助指令来了解该指令的信息

##### 1.man  获得帮助信息

基本语法：man [命令或配置文件] (功能描述，获得帮助信息)

eg:

1.查看ls命令的帮助信息

![](.\IMAGES\18_1.png)

![](.\IMAGES\18_2.png)

![](.\IMAGES\18_3.png)



##### 2.help指令

基本语法:help 命令 (功能描述：获得shell内置命令的帮助信息)

eg:

1.查看cd命令的帮助信息

![](.\IMAGES\18_5.png)

建议：当一个指令不熟悉的时，可以百度，也可以看help



#### 十九.实用指令——文件目录类指令

##### 1.pwd 指令

基本语法：pwd #功能描述：显示当前工作目录的绝对路径

eg:

![](.\IMAGES\19_1.png)

##### 2.ls指令

基本语法：ls  [选项]    [目录或是文件]

常用选项：

-a : 显示当前目录所有的文件和目录，包括隐藏的

-h :以人类便于查看的形式显示

-l : 以列表的方式显示信息

eg:查看当前目录的所有内容信息

![](.\IMAGES\19_2.png)

![](.\IMAGES\19_3.png)

##### 3.cd 指令

基本语法:cd [参数] （功能描述：切换到指定目录)

注：**绝对路径**：从根目录开始定位

​		**相对路径**：从当前工作目录开始定位到我们需要的路径中去

常用参数：

绝对路径和相对路径

cd ~ 或者cd :回到自己的家目录

cd .. 回到当前目录的上一级目录

应用实例：

案例1:使用绝对路径切换到root目录

![](.\IMAGES\19_4.png)

案例2：使用相对路径到/root目录

这里我们需要知道该用户在哪个目录下，才能进行定位，假设在/usr/lib中：

cd ../root  #进行到root目录中

![](.\IMAGES\19_5.png)

案例3：表示回到当前目录的上一级目录

![](.\IMAGES\19_6.png)

案例4：回到家目录

![](.\IMAGES\19_7.png)



##### 4.mkdir指令

基本语法：mkdir  [选项] 要创建的目录 #用于创建目录(directory)

常见选项：

-p : 创建多级目录

eg:

1.创建一个目录 /home/dog

![](.\IMAGES\19_8.png)



2.创建多级目录 /home/animal/tiger

![](.\IMAGES\19_9.png)

注：如果希望一次性创建多级目录，带上-p这个参数

##### 5.rmdir 删除目录

基本语法：rmdir [选项] 要删除的空目录

应用实例：

eg:删除一个目录 /home/dog

![](.\IMAGES\19_10.png)

使用细节：

rmdir 删除的是空目录，如果目录下有内容时无法删除

提示：如果需要删除非空目录，需要使用 rm -rf 要删除的目录

![](.\IMAGES\19_11.png)



##### 6.touch指令：创建一个空文件

基本语法：touch 文件名称

eg:创建一个空文件 hello.txt

![](.\IMAGES\19_12.png)

一次性创建多个指令

![](.\IMAGES\19_13.png)

7.cp 拷贝指令(重要)

cp指令拷贝文件到指定目录

基本语法：

cp [选项] source dest

常用选项：

-r : 递归复制整个文件夹

注：一定要注意当前目录位置，然后准确定位源目录和目标目录

应用实例：

1.将/home/aaa.txt拷贝到/home/bbb目录下

![](.\IMAGES\19_14.png)

2.递归复制整个文件夹，举例：

-r:递归拷贝

![](.\IMAGES\19_15.png)

cp指令当发现目标目录下有同名文件，会提示是否覆盖

使用细节：

强制覆盖不提示的方法： \cp

![](.\IMAGES\19_16.png)

小技巧：可以通过上下箭头键调出原先使用过的指令



#### 二十.实用指令——rm 和mv

##### 1.rm 指令

rm指令：移除文件或目录

基本语法:rm [选项] 要删除的文件和目录

常用选项：

-r :递归删除整个文件夹

-f : 强制删除不提示



eg:

1.将/home/aa.txt删除

![](.\IMAGES\20_1.png)



2.递归删除整个文件夹/home/bbb

![](.\IMAGES\20_2.png)

使用细节：强制删除不提示的方法，带上-f参数即可

![](.\IMAGES\20_3.png)



##### 2.mv指令

mv 移动文件与目录或重命名

基本语法：

mv oldNameFile newNameFile  (功能描述：重命名)

mv /temp/movefile /targetFolder(功能描述)

应用实例：

案例1：将/home/aaa.txt文件 重新命名为pig.txt

![](.\IMAGES\20_4.png)



案例2：将/home/pig.txt文件移动到/root目录下

![](.\IMAGES\20_5.png)



#### 二十一.实用指令——cat more less

##### 1.cat 查看文件内容

基本语法：

cat [选项] 要查看的文件,是以只读的方式打开

常用选项：

-n 显示行号

应用实例：

案例1： /ect/profile  文件内容，并显示行号

![](.\IMAGES\21_1.png)

![](.\IMAGES\21_2.png)：显示行号

使用细节：

cat只能浏览文件，而不能修改文件，为了浏览方便，一般会带上 管道命令 |more：分页显示，按space键进入下一页

![](.\IMAGES\21_3.png)



##### 2.more 指令

介绍：more指令是一个基于VI编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。

more指令中内置了若干快捷键。

基本语法：more 要查看的文件

操作说明：

![](.\IMAGES\21_4.png)



eg:

采用more查看文件 /etc/profile

![](.\IMAGES\21_6.png)



3.less指令

less指令用来分屏查看文件内容，它的功能与more指令类似，但是比more指令更加强大，支
持各种显示终端。 less指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是
根据显示需要加载内容， **对于显示大型文件具有较高的效率。**  

基本语法：less  要查看的文件

操作说明：

![](.\IMAGES\21_7.png)

eg:采用less查看一个大文件文件  /opt/金庸-射雕英雄传txt精校板.txt\

![](.\IMAGES\21_8.png)



#### 二十二.实用指令——重定向和追加

##### 1. > 输出重定向指令(会覆盖)和 >> 追加指令(末尾增添)



基本语法：

1.ls -l > 文件      (功能描述：当前列表的内容写入到文件a.txt中(**覆盖写**))

2.ls -al >> 文件      (功能描述：当前列表的内容追加到文件aa.txt中的末尾)

3.cat 文件1 > 文件2   (功能描述：将文件1的内容覆盖到文件2)

4.echo "内容" >>文件



eg:

1.覆盖

![](.\IMAGES\22_1.png)



2.将当前日历信息追加到 /home/mycal 文件中[提示cal(显示日历信息)]

![](.\IMAGES\22_2.png)

3.cat 

![](.\IMAGES\22_6.png)

4.echo "内容" >>文件 （追加）

![](.\IMAGES\22_4.png)

![](.\IMAGES\22_5.png)





#### 二十三.实用指令——echo head tail三个指令

##### 1.echo指令

echo输出内容到控制台

基本语法：echo [选项] [输出内容]

eg:

1.使用echo指令输出环境变量，输出当前的环境路径

![](.\IMAGES\23_1.png)

2.使用echo指令输出 hello,world!

![](.\IMAGES\23_2.png)



##### 2.head指令

head用于显示文件的开头部分内容，默认情况下head指令显示文件的前10行内容

基本语法：

head 文件 #查看文件头10行内容

head -n 5 文件  #查看文件头5行内容，5可以是任意行数

eg:

1.查看 /etc/profile 的前面5行代码

![](.\IMAGES\23_3.png)



##### 3.tail指令

tail用于显示文件的尾部部分内容，默认情况下tail指令显示文件的后10行内容

基本语法：

tail 文件 #查看文件后10行内容

tail -n 5 文件  #查看文件后5行内容，5可以是任意行数

tail -f 文件    #实时追踪该文档的所有更新

eg:

1.查看 /etc/profile 的后5行代码

![](.\IMAGES\23_4.png)

2.实时监控mydata.txt,看看到文件有变化时，是否看到，实时的追加日期(ctrl + c退出tail实时监控)

![](.\IMAGES\23_5.png)



#### 二十四.实用指令——ln、 history指令

##### 1.ln

软链接也成为符号链接，类似于windows里的快捷方式， 主要存放了链接其他文件的路径

基本语法： ln -s [原文件或目录] [软链接名]  #给原文件创建一个软链接

eg:

1: 在/home 目录下创建一个软连接 linkToRoot，连接到 /root 目录
![](.\IMAGES\23_6.png)

![](.\IMAGES\23_7.png)

2: 删除软连接 linkToRoot

![](.\IMAGES\23_8.png)

注：当我们使用pwd指令查看目录时，仍然看到的是软链接所在目录



##### 2.history

查看已经执行过历史命令，也可以执行历史命令

基本语法：history (查看已经执行过的历史指令)

eg:

1.显示所有的历史指令

![](.\IMAGES\25_1.png)

2.显示最近使用过的10个历史指令

![](.\IMAGES\25_2.png)

3.执行历史编号115的指令

![](.\IMAGES\25_3.png)



#### 二十五.时间日期类相关指令

##### 1.date指令-显示当前日期

基本语法：

1.date  #显示当前时间

2.date +%Y  #显示当前年份

3.date + %m  #显示当前月份

4.date + %d   #显示当前是哪一天

5.date  "+%Y - %m - %d %H:%M:%S"  #显示年月日时分秒

eg:

1.显示当前时间信息

![](.\IMAGES\25_4.png)

2.显示当前时间年月日

![](.\IMAGES\25_5.png)

![](.\IMAGES\25_6.png)

2.显示当前时间年月日时分秒

![](.\IMAGES\25_7.png)



##### 2.date指令——设置日期

基本语法：

date -s 字符串时间

eg:设置系统当前时间 eg:2021-4-3 15:51:23

![](.\IMAGES\25_8.png)



##### 3.cal指令——显示日历

基本语法：cal [选项] #不加选项，显示本月日历

eg:

1.显示当前日历

![](.\IMAGES\25_9.png)

2.显示2022年日历

![](.\IMAGES\25_10.png)



#### 二十六.搜索查找类相关指令

##### 1.find指令

介绍：将从指定目录向下递归地遍历其各个子目录，将满足条件或或者目录显示在终端

基本语法：

find [搜索范围] [选项]

选项说明：

![](.\IMAGES\26_1.png)



eg:

1.按文件名：根据名称查找/home 目录下的hello.txt文件

![](.\IMAGES\26_2.png)



2.按拥有者：查找/opt目录下，用户名称为 nobody的文件

![](.\IMAGES\26_4.png)

![](.\IMAGES\26_5.png)

3.查找整个linux系统下大于20m的文件（+n 大于 -n小于 n等于）  

![](.\IMAGES\26_6.png)



![](.\IMAGES\26_7.png)

4.按通配符进行查找

查询/ 目录下，所有  .txt的文件

![](.\IMAGES\26_8.png)



##### 2.locate 指令

locaate指令可以快速定位文件路径。 locate指令利用事先建立的系统中所有文件名称及路径
的locate数据库实现快速定位给定的文件。 Locate指令无需遍历整个文件系统，查询速度较快。
为了保证查询结果的准确度，管理员必须定期更新locate时刻。  

基本语法: locate 搜索文件

特别说明：由于locate指令基于数据库进行查询，所以第一次运行前，**必须使用updatedb指令创建locate数据库**

eg:

1: 请使用locate 指令快速定位 hello.txt 文件所在目录

![](.\IMAGES\26_9.png)



##### 3.grep指令和管道符号|

grep 过滤查找，管道符 "|",表示将前一个命令的处理结果输出传递给后面的命令处理。

基本语法： grep [选项] 查找内容 源文件

常用选项：

![](.\IMAGES\26_10.png)



eg:

1.请在hello.txt文件中，查找"yes"所在行，并且显示行号

![](.\IMAGES\26_11.png)



![](.\IMAGES\26_12.png)

![](.\IMAGES\26_13.png)



#### 二十七.压缩和解压缩类指令

##### 1.gzip/gunzip指令

gzip用于压缩文件，gunzip用于解压的

基本语法：

gzip 文件  #压缩文件，只能将文件压缩为*.gz文件

gunzip 文件.gz  #解压缩文件命令

eg:

1.gzip压缩，将/home下的hello.txt文件进行压缩

![](.\IMAGES\27_1.png)

2.gunzip压缩，将/home下的hello.txt.gz文件进行解压缩

![](.\IMAGES\27_2.png)

细节说明：1.压缩和解压后源文件和压缩文件都会消失2.可以一次操作多个



##### 2.zip/unzip指令

zip用于压缩文件，unzip用于解压文件，在项目打包中很有用

基本语法：

zip [选项] XXX.zip 将要压缩的内容   #(压缩文件和目录的命令)

unzip [选项] XXX.zip   #解压缩文件

zip常用选项： -r ：递归压缩，即压缩目录

unzip常用选项：-d<目录> :指定解压后文件的存放目录

eg:

1.将/home下的所有文件压缩成mypackage.zip

![](.\IMAGES\27_3.png)

2.gunzip压缩， 将 /home下的 hello.txt.gz 文件进行解压缩  

![](.\IMAGES\27_4.png)



##### 3.tar指令

tar指令是打包指令，最后打包后的文件是.tar.gz的文件

基本语法：tar [选项] XXX.tar.gz 打包的内容 # (打包目录，压缩后的文件格式.tar.gz  )

选项说明：

![](.\IMAGES\27_5.png)

eg:

1.压缩多个文件，将 /home/a1.txt 和 /home/a2.txt 压缩成 a.tar.gz

![](.\IMAGES\27_6.png)

2.将/home 的文件夹 压缩成 myhome.tar.gz

![](.\IMAGES\27_7.png)

3.将 a 解压到当前目录

![](.\IMAGES\27_8.png)



4.将myhome.tar.gz解压到/opt/目录下

注意  解压时到指定目录时，-C要加到tar指令中

![](.\IMAGES\27_9.png)

![](.\IMAGES\27_10.png)

前提:指定解压到的目录事先要存在





#### 二十八.组管理和权限管理(重难点)

Linux组基本介绍：

在linux中的每个用户必须属于一个组，不能独立于组外。在linux中每个文件有所有者，所在组，其它组的概念。

1.所有者

2.所在组

3.其他组

4.改变用户所在的组

![](.\IMAGES\28_1.png)



##### 1.文件/目录所有者

一般为文件的创建者，谁创建了该文件，就自然的成为该文件的所有者。

**查看文件的所有者**

1.指令：ls -ahl

eg:

创建一个组police,在创建一个用户tom,把tom放在police组，然后使用tom来创建一个文件ok.txt,看看情况如何

![](.\IMAGES\28_2.png)

![](.\IMAGES\28_3.png)

**修改文件所有者**

指令：chown  用户名  文件名

eg:

使用root 创建一个文件apple.txt ，然后将其所有者修改成 zhangfei  

![](.\IMAGES\28_4.png)

![](.\IMAGES\28_5.png)





##### 2.组的创建

基本指令：

groupadd  组名

eg:

1.创建一个组，monster

![](.\IMAGES\28_6.png)

2.创建一个用户fox,并放入到monster组中去

![](.\IMAGES\28_6.png)



##### 3.文件/目录所在组(注意所有者和所在组)

当某个用户创建了一个文件后，默认这个文件的所有组就是该用户所在组

**查看文件的所在组**

1.指令：ls -ahl

**修改文件所在组**

基本指令：charp  组名  文件名

eg:使用root用户创建文件 orange.txt ,看看当前这个文件属于哪个组，然后将这个文
件所在组，修改到 police组。  

![](.\IMAGES\28_7.png)

![](.\IMAGES\28_8.png)



##### 3.其他组

除文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组。  



##### 4.改变用户所在组

在添加用户时，可以指定将该用户添加到哪个组，同样的用root的管理权限可以改变某个用户所在的组

##### 改变用户所在组

1.**usermod  -g  组名  用户名**

2.usermod  -d  目录名  用户名  改变该用户登录的初始目录

eg:

创建一个土匪组(bandit)将tom这个用户从原来所在的police组，修改到bandit(土匪)组

![](.\IMAGES\28_9.png)

将tom用户修改到bandit组去



#### 二十九.权限的基本介绍

ls -l中显示内容如下：

**-rwxrw-r--** 1 root root 1213 Feb 2 09:39 abc  

**0-9位说明**
1) 第0位确定文件类型(d, - , l , c , b)
2) 第1-3位确定所有者（该文件的所有者）拥有该文件的权限。 ---User
3) 第4-6位确定所属组（同用户组的）拥有该文件的权限， ---Group
4) 第7-9位确定其他用户拥有该文件的权限 ---Other

![](.\IMAGES\29_1.png)  

##### 1.**rwx权限详解**

**rwx作用到文件**

1.[r] 代表可读(read):可以读取，查看

2.[w] 代表可写(write):可以修改，但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件

3.[x] 代表可执行(execute):可以被执行

**rwx作用到目录**

1.[r]代表可读(read): 可以读取，ls查看目录内容

2.[w]代表可写(write): 可以修改，目录内创建+删除+重命名目录

3.[x] 代表可执行(execute):可以进入该目录

![](.\IMAGES\29_2.png)

eg:

ls -l 中显示的内容如下：
-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc
10个字符确定不同用户能对文件干什么
第一个字符代表文件类型： 文件 (-),目录(d),链接(l)
其余字符每3个一组(rwx) 读(r) 写(w) 执行(x)
第一组rwx : 文件拥有者的权限是读、写和执行
第二组rw- : 与文件拥有者同一组的用户的权限是读、写但不能执行
第三组r-- : 不与文件拥有者同组的其他用户的权限是读不能写和执行 

可用数字表示为: **r=4,w=2,x=1 因此rwx=4+2+1=7**

1                                              文件：硬连接数或 目录：子目录数

root                                         用户
root                                         组
1213                                        文件大小(字节)， **如果是文件夹，显示 4096字节**
Feb 2 09:39                            最后修改日期
abc                                           文件名

#### 三十.权限管理

##### 1.修改权限 - chmod

介绍：通过chmod指令，可以修改文件或者目录的权限。

![](.\IMAGES\30_1.png))

**第一种方式：+、-、=变更权限**

u:所有者   g:所有组  o:其他人  a:所有人(u、g、o的总称)

1.chmod u=rwx,g=rx,o=x   文件目录名

2.chmod o+w   文件目录名

3.chmod a-x   文件目录名

eg:

1.给abc文件 的所有者读写执行的权限，给所在组读执行权限，给其它组读执行权限。

![](.\IMAGES\30_2.png)

Linux中可执行文件绿色标亮显示

2.给abc文件的所有者除去执行的权限，增加组写的权限

![](.\IMAGES\30_3.png)

3.给abc文件的所有用户添加读的权限  

![](.\IMAGES\30_4.png)

##### 第二种方式:通过数字变更权限

规则：**r=4 w=2 x=1          rwx=4+2+1=7**

chmod u=rwx,g=rx,o=x    文件目录名

等效于chmod 751 文件目录名

eg:将 /home/abc.txt 文件的权限修改成 rwxr-xr-x, 使用给数字的方式实现

  chmod 755 /home/abc.tx

##### 2.修改文件所有者——chown

基本语法：

chown  newowner file 改变文件的所有者

chown  newowne:newgroup  file  改变用户的所有者和所有组

**-R  如果是目录  则使其下所有子文件或目录递归生效**

eg:

1.请将 /home/abc .txt 文件的所有者修改成 tom 

![](.\IMAGES\30_5.png)

2.请将 /home/kkk 目录下所有的文件和目录的所有者都修改成tom 

首先我们应该使用root用户来操作

![](.\IMAGES\30_6.png)



##### 3.修改文件所在组-chgrp

语法：chgrp  newgroup  file  改变文件的所有组

**-R  如果是目录  则使其下所有子文件或目录递归生效**

eg:

1.请将 /home/abc .txt 文件的所在组修改成 bandit (土匪)

chgrp bandit /home/abc.tx

2.请将 /home/kkk 目录下所有的文件和目录的所在组都修改成 bandit(土匪) 

 chgrp -R bandit /home/kkk

![](.\IMAGES\30_7.png)



#### 三十一.权限管理最佳实践

要求：

police ， bandit
jack, jerry: 警察
xh, xq: 土匪
(1) 创建组

bash> groupadd police

bash> groupadd bandit

(2) 创建用户

bash>useradd -g police jack

bash>useradd -g police jerry

![](.\IMAGES\31_1.png)

![](.\IMAGES\31_2.png)

(3) jack 创建一个文件，自己可以读写，本组人可以读，其它组没人任何权限

![](.\IMAGES\31_3.png)

![](.\IMAGES\31_4.png)

(4) jack 修改该文件，让其它组人可以读, 本组人可以读写

![](.\IMAGES\31_5.png)

(5) xh 投靠 警察，看看是否可以读写.  

1.先用root修改xh的组

2.使用jack给他的家目录/home/jack的所在组一个rx的权限

给予权限后，xh需要重新注销(logout)一下，再到jack目录就可以操作jack的文件了

![](.\IMAGES\31_6.png)

![](.\IMAGES\31_6.png)

![](.\IMAGES\31_8.png)

![](.\IMAGES\31_9.png)

![](.\IMAGES\31_10.png)

![](.\IMAGES\31_11.png)



#### 三十二.crond任务调度基本说明

crontab进行定时任务的设置

##### 概述：

**任务调度**：是指系统在某个时间执行的特定的命令或程序。
**任务调度分类**： 1.系统工作：有些重要的工作必须周而复始地执行。如病毒扫描等
2.个别用户工作：个别用户可能希望执行某些程序，比如对mysql数据库的备份。  

![](.\IMAGES\32_1.png)

![](.\IMAGES\32_2.png)

##### 基本语法：

crontab [选项]

##### 常用选项:

​              -e                         编辑crontab定时任务
​              -l                          查询crontab任务
​              -r                         删除当前用户所有的crontab任务

##### 快速入门:

设置任务调度文件： /etc/crontab
设置个人任务调度。执行crontab –e命令。
接着输入任务到调度文件
如： */1 * * * * ls –l /etc/ > /tmp/to.txt
意思说每小时的每分钟执行ls –l /etc/ > /tmp/to.txt命令

##### 步骤如下:

1.cron -e

2.*/1 * * * * ls –l /etc/ > /tmp/to.txt

3.当保存退出后就生效

4.在每一分钟就自动调用  ls –l /etc/ > /tmp/to.txt 

![](.\IMAGES\32_4.png)

  ![](.\IMAGES\32_5.png)

![](.\IMAGES\32_6.png)

**参数细节说明**

项目                     含义                                        范围
第一个“ * ”          一小时当中的第几分钟          0-59
第二个“ * ”          一天当中的第几小时              0-23
第三个“ * ”          一个月当中的第几天              1-31
第四个“ * ”          一年当中的第几月                  1-12
第五个“ * ”          一周当中的星期几                  0-7（0和7都代表星期日）

**特殊符号的说明** 

特殊符号                      含义

“ * ”                              代表任何时间。 比如第一个“*”就代表一小时中每分钟都执行一次的意思。
" , "                               代表不连续的时间。 比如“0 8,12,16 * * * 命令”， 就代表在每天的8点0分， 12点0分， 16点0分都执行一次命令

" - "                               代表连续的时间范围。 比如“0 5 * * 1-6命令”， 代表在周一到周六的凌晨5点0分执行命令

“ * /n”                           代表每隔多久执行一次。 比如“*/10 * * * * 命令”， 代表每隔10分钟就执行一遍命令



**特定时间执行任务案例**

![](.\IMAGES\32_7.png)

**crond 相关指令:**  

1. conrtab –r：终止任务调度。
2. crontab –l：列出当前有那些任务调度
3. service crond restart [重启任务调度]  

eg:

**1.每隔1分钟，就将当前的日期信息，追加到 /tmp/mydate 文件中**

1) 先编写一个文件 mytask1.sh(脚本文件)

 date >> /tmp/mydate

![](.\IMAGES\32_8.png)

2) 给mytask1.sh 一个可执行权限

chmod 744  /home/mytask1.sh

![](.\IMAGES\32_9.png)

3）crontab -e

![](.\IMAGES\32_10.png)

4) */1 * * * *  /home/mytask1.sh

5) 成功

![](.\IMAGES\32_11.png)

**2.每隔1分钟， 将当前日期和日历都追加到 /home/mycal 文件中**

1) 先编写一个文件 /home/mytask2.sh

date >> /tmp/mycal

cal >> /tmp/mycal

![](.\IMAGES\32_12.png)

2) 给mytask2.sh 一个可以执行的权限

chmod 744 /home/mytask2.sh

![](.\IMAGES\32_13.png)

3) crontab -e

4) */1 * * * *  /home/mytask2.sh

5)成功

![](.\IMAGES\32_14.png)

![](.\IMAGES\32_15.png)



**3.每天凌晨2:00 将mysql数据库 testdb ，备份到文件中。**  

1) 先编写一个文件  /home/mytask3.sh

/usr/local/mysql/bin/mysqldump -u root -proot testdb > /tmp/mydb.bak

2) 给mytask3.sh 一个可以执行的权限

chmod 744 /home/mytask3.sh

3) crontab -e

4) 0 2 * * *  /home/mytask3.sh

5)成功



#### 三十三.Linux磁盘分区、挂载

##### 1.分区基础知识  

**分区的方式：**
1) mbr分区:
1.最多支持四个主分区
2.系统只能安装在主分区
3.扩展分区要占一个主分区
4.MBR最大只支持2TB，但拥有最好的兼容性
2) gtp分区:
1.支持无限多个主分区（但操作系统可能限制，比如 windows下最多128个分区）
2.最大支持18EB的大容量（1EB=1024 PB， 1PB=1024 TB ）
3.windows7 64位以后支持gtp 

**windows下的磁盘分区**   

![](.\IMAGES\32_16.png)

**2.Linux分区**

原理介绍：

1) Linux来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独
立且唯一的文件结构 , Linux中每个分区都是用来组成整个文件系统的一部分。
2) Linux采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目
录，且将一个分区和一个目录联系起来。这时要载入的一个分区将使它的存储空间在一
个目录下获得。

![](.\IMAGES\33_1.png)

##### 3.硬盘说明  

1) Linux硬盘分IDE硬盘和SCSI硬盘，目前基本上是SCSI硬盘
2) 对于IDE硬盘，驱动器标识符为“hdx~”,其中“hd”表明分区所在设备的类型，这里是指
IDE硬盘了。“x”为盘号（a为基本盘， b为基本从属盘， c为辅助主盘， d为辅助从属
盘） ,“~”代表分区，前四个分区用数字1到4表示，它们是主分区或扩展分区，从5开始就
是逻辑分区。例， hda3表示为第一个IDE硬盘上的第三个主分区或扩展分区,hdb2表示为
第二个IDE硬盘上的第二个主分区或扩展分区。
3) 对于SCSI硬盘则标识为“sdx~”， SCSI硬盘是用“sd”来表示分区所在设备的类型的，其余
则和IDE硬盘的表示方法一样。 

使用lsblk指令查看设备当前挂载情况 

![](.\IMAGES\33_2.png)



查看所有设备挂载情况

命令：lsblk或者lsblk -f

![](.\IMAGES\33_3.png)

##### eg:挂载的经典案例 

##### 需求：给我们的Linux系统增加新的一块硬盘，并挂载到/home/newdisk上

 ![](.\IMAGES\33_1.png)

说明：
下面我们以增加一块硬盘为例来熟悉下磁盘的相关指令和深入理解磁盘分区、挂
载、卸载的概念。

**如何增加一块硬盘**
1) 虚拟机添加硬盘

虚拟机增加硬盘步骤1在【虚拟机】 菜单中，选择【设置】 ，然后设备列表里添加硬盘，然后一路【下一步】 ，中间只有选择磁盘大小的地方需要修改，至到完成。然后重启系统（才能识别）！

![](.\IMAGES\33_4.png)

2) 分区    	   fdisk/dev/sdb

分区命令 fdisk /dev/sdb
开始对/sdb分区
• m 显示命令列表
• p 显示磁盘分区 同 fdisk –l
• n 新增分区
• d 删除分区
• w 写入并退出
说明： 开始分区后输入n，新增分区，然后选择p ，分区类型为主分区。两次回车默认剩余全部空间。最后输入w写入分区并退出，若不保存退出输入q。

![](.\IMAGES\33_5.png)

3) 格式化   	mkfs -t ext4   /dev/sdb1

分区命令:mkfs -t ext4 /dev/sdb1      其中ext4是分区类型  

4) 挂载		  先创建一个目录 /home/newdisk,挂载 mount /dev/sdb1  /home/newdisk

umount:断掉挂载

![](.\IMAGES\33_6.png)

5) 设置可以自动挂载 。  (永久挂载，当你重启系统，仍然可以挂载到 /home/newdisk)

vim /etc/fstab

/dev/sdb1                                 /home/newdisk           ext4    defaults        0 0

永久挂载: 通过修改/etc/fstab实现挂载
添加完成后 执行mount –a 即刻生效  

![](.\IMAGES\33_7.png)

#### 三十四.磁盘情况查询

##### 1.查询系统整体磁盘使用情况

基本语法： df -h

eg:

查询系统整体磁盘使用情况

![](.\IMAGES\34_1.png)



##### 2.查询指定目录的磁盘占用情况

基本语法： du -h  /目录

查询指定目录的磁盘占用情况，默认为当前目录

-s  指定目录占用大小汇总

-h  带计量单位

-a  含文件

--max-depth=1  子目录深度

-c  列出明细的同时，增加汇总值



eg:

1.查询 /opt 目录的磁盘占用情况，深度为1

![](.\IMAGES\34_2.png)



##### 3.磁盘情况-工作实用指令

1) 统计/home文件夹下文件的个数

![](.\IMAGES\34_3.png) 
2) 统计/home文件夹下目录的个数

![](.\IMAGES\34_4.png)

3) 统计/home文件夹下文件的个数，包括子文件夹里的

![](.\IMAGES\34_7.png)

4) 统计文件夹下目录的个数，包括子文件夹里的

![](.\IMAGES\34_5.png)



5) 以树状显示目录结构  )

yum install tree(安装不成功见博客)

tree

![](.\IMAGES\34_6.png)

#### 三十四.Linux网络配置

##### 1.网络配置原理图(含虚拟机)

目前我们的网络配置采用的是NAT

![](.\IMAGES\35_1.png)



##### 2.查看网络IP和网关

**1.查看虚拟网络编辑器**

![](.\IMAGES\35_2.png)

**2.修改IP地址(修改虚拟网卡的ip地址)**

![](.\IMAGES\35_4.png)



**3.查看网关**

![](.\IMAGES\35_5.png)



##### 3.查看windows环境中的VMnet8网络配置(ipconfig指令)

1.使用ipconfig查看

2.界面查看

![](.\IMAGES\35_6.png)



##### 4.ping测试主机之间网络连通性

基本语法： ping 目的主机（功能描述：测试当前服务器是否可以连接目的主机）

eg:

1.测试当前服务器是否可以连接搜狐

![](.\IMAGES\35_7.png)